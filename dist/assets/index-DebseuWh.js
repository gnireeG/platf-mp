(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const d of i)if(d.type==="childList")for(const r of d.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function t(i){const d={};return i.integrity&&(d.integrity=i.integrity),i.referrerPolicy&&(d.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?d.credentials="include":i.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function s(i){if(i.ep)return;i.ep=!0;const d=t(i);fetch(i.href,d)}})();class a{constructor(e){if(this.mouse={x:0,y:0},this.keydown=!1,this.pressedKeysCount=0,this.keysPressed={},this.deltaTime=0,this.lastTime=0,this.canvasHTML=document.getElementById(e),!this.canvasHTML)throw new Error("Canvas element not found");this.ctx=this.canvasHTML.getContext("2d"),this.bindMouse(),this.bindKeysboard(),this.lastTime=performance.now()}bindMouse(){this.canvasHTML.addEventListener("mousemove",e=>{this.mouse={x:e.offsetX,y:e.offsetY}})}bindKeysboard(){document.addEventListener("keydown",e=>{this.keysPressed[e.key]||(this.keysPressed[e.key]=!0,this.pressedKeysCount++),this.keydown=this.pressedKeysCount>0}),document.addEventListener("keyup",e=>{this.keysPressed[e.key]&&(this.keysPressed[e.key]=!1,this.pressedKeysCount--),this.keydown=this.pressedKeysCount>0})}updateDeltaTime(e){this.deltaTime=(e-this.lastTime)/1e3,this.lastTime=e}color(e){this.ctx.fillStyle=e}background(e){this.ctx.fillStyle=e,this.ctx.fillRect(0,0,this.canvasHTML.width,this.canvasHTML.height)}circle(e,t,s){this.ctx.beginPath(),this.ctx.arc(e,t,s,0,Math.PI*2),this.ctx.fill()}square(e,t,s){this.ctx.fillRect(e,t,s,s)}rectangle(e,t,s,i){this.ctx.fillRect(e,t,s,i)}}class c{constructor(e,t){this.x=0,this.y=0,this.r=10,this.show=!1,this.c=e,this.level=t,this.spawn()}draw(){if(!this.show)return;this.c.keysPressed.ArrowRight&&(this.x+=100*this.c.deltaTime),this.c.keysPressed.ArrowLeft&&(this.x-=100*this.c.deltaTime),this.c.keysPressed.ArrowUp&&(this.y-=100*this.c.deltaTime),this.c.keysPressed.ArrowDown&&(this.y+=100*this.c.deltaTime);let e=this.isOnPlatform();e!==0&&(this.y=e-this.r);let t=this.isBelowPlatform();t!==0&&(this.y=t+this.r);let s=this.isOnRightSide();s!==0&&(this.x=s-this.r);let i=this.isOnLeftSide();i!==0&&(this.x=i+this.r),this.c.color("white"),this.c.circle(this.x,this.y,this.r)}isOnPlatform(){let e=0;return this.level.forEach(t=>{t.type==="Block"&&this.x>t.x&&this.x<t.x+t.width&&this.y+this.r>t.y&&this.y+this.r<t.y+t.height&&(e=t.y)}),e}isBelowPlatform(){let e=0;return this.level.forEach(t=>{t.type==="Block"&&this.x>t.x&&this.x<t.x+t.width&&this.y-this.r>t.y&&this.y-this.r<t.y+t.height&&(e=t.y+t.height)}),e}isOnRightSide(){let e=0;return this.level.forEach(t=>{t.type==="Block"&&this.y>t.y&&this.y<t.y+t.height&&this.x+this.r*2>t.x&&this.x+this.r*2<t.x+t.width&&(e=t.x)}),e}isOnLeftSide(){let e=0;return this.level.forEach(t=>{t.type==="Block"&&this.y>t.y&&this.y<t.y+t.height&&this.x-this.r*2>t.x&&this.x-this.r*2<t.x+t.width&&(e=t.x+t.width)}),e}spawn(){this.level.forEach(e=>{e.type==="Start"&&(this.x=e.x,this.y=e.y)}),this.show=!0}}const b={background:"#000000",width:256,height:256},l={show:!0,sizeX:16,sizeY:16},f=[{id:"bef13a78-b1e1-4dc4-a576-9ee61634aa2d",type_id:"d72c63a1-e251-4902-b32d-05b567d09437",x:0,y:240,width:16,height:16,props:{},type:"Block",texture:"#6B7280",resize:"Disable"},{id:"dd4b26b4-c826-418c-8662-147ac0ff9e07",type_id:"d72c63a1-e251-4902-b32d-05b567d09437",x:16,y:240,width:16,height:16,props:{},type:"Block",texture:"#6B7280",resize:"Disable"},{id:"21ea334f-d06c-4db6-b2a9-32b8684f77c4",type_id:"d72c63a1-e251-4902-b32d-05b567d09437",x:32,y:240,width:16,height:16,props:{},type:"Block",texture:"#6B7280",resize:"Disable"},{id:"67984545-8882-4b10-a307-2a29ddcd0b9b",type_id:"809a375f-5c2a-462e-a7df-21dfd926111b",x:48,y:160,width:16,height:16,props:{},type:"Spike",texture:"#b30909",resize:"Disable"},{id:"21bd1932-5d75-4b91-ba63-0e419c7ad00b",type_id:"809a375f-5c2a-462e-a7df-21dfd926111b",x:48,y:176,width:16,height:16,props:{},type:"Spike",texture:"#b30909",resize:"Disable"},{id:"82eb20f9-fb26-4bd2-bad2-a824e1abf7b7",type_id:"d72c63a1-e251-4902-b32d-05b567d09437",x:64,y:160,width:16,height:16,props:{},type:"Block",texture:"#6B7280",resize:"Disable"},{id:"d07b813c-3ce1-4301-91b3-04dae21d583a",type_id:"d72c63a1-e251-4902-b32d-05b567d09437",x:80,y:160,width:16,height:16,props:{},type:"Block",texture:"#6B7280",resize:"Disable"},{id:"557f3435-9e43-4073-b590-e50f4740c38f",type_id:"d72c63a1-e251-4902-b32d-05b567d09437",x:96,y:160,width:16,height:16,props:{},type:"Block",texture:"#6B7280",resize:"Disable"},{id:"960d978a-697c-4cf6-b4fc-d37af491e5be",type_id:"d72c63a1-e251-4902-b32d-05b567d09437",x:0,y:48,width:16,height:16,props:{},type:"Block",texture:"#6B7280",resize:"Disable"},{id:"5bbec467-6bb1-4470-819f-49db5da34a1e",type_id:"d72c63a1-e251-4902-b32d-05b567d09437",x:16,y:48,width:16,height:16,props:{},type:"Block",texture:"#6B7280",resize:"Disable"},{id:"65400dc0-b527-4594-9740-2a9c6ed14ea5",type_id:"d72c63a1-e251-4902-b32d-05b567d09437",x:32,y:48,width:16,height:16,props:{},type:"Block",texture:"#6B7280",resize:"Disable"},{id:"f7c6cb16-6fb9-4ae9-8a32-e22d6289aa20",type_id:"809a375f-5c2a-462e-a7df-21dfd926111b",x:112,y:128,width:16,height:16,props:{},type:"Spike",texture:"#b30909",resize:"Disable"},{id:"ac703542-ae91-4d3a-8bba-bd1a4c561483",type_id:"809a375f-5c2a-462e-a7df-21dfd926111b",x:112,y:144,width:16,height:16,props:{},type:"Spike",texture:"#b30909",resize:"Disable"},{id:"5211c0ed-296b-48f0-bfe9-b35ca0d1dc66",type_id:"809a375f-5c2a-462e-a7df-21dfd926111b",x:112,y:160,width:16,height:16,props:{},type:"Spike",texture:"#b30909",resize:"Disable"},{id:"eface9bd-963b-4edf-b186-d32308a48f96",type_id:"809a375f-5c2a-462e-a7df-21dfd926111b",x:112,y:176,width:16,height:16,props:{},type:"Spike",texture:"#b30909",resize:"Disable"},{id:"80dccadc-dbd4-4d56-91bc-8c7d0e3d7e49",type_id:"d72c63a1-e251-4902-b32d-05b567d09437",x:208,y:80,width:16,height:16,props:{},type:"Block",texture:"#6B7280",resize:"Disable"},{id:"576de85a-0966-43b0-a070-dd1bb037f3ac",type_id:"d72c63a1-e251-4902-b32d-05b567d09437",x:224,y:80,width:16,height:16,props:{},type:"Block",texture:"#6B7280",resize:"Disable"},{id:"accede01-b268-44b6-866a-ca8f4e1d5c17",type_id:"d72c63a1-e251-4902-b32d-05b567d09437",x:240,y:80,width:16,height:16,props:{},type:"Block",texture:"#6B7280",resize:"Disable"},{id:"c662aac0-24d4-42a1-b37b-ca3929c688e1",type_id:"809a375f-5c2a-462e-a7df-21dfd926111b",x:112,y:80,width:16,height:16,props:{},type:"Spike",texture:"#b30909",resize:"Disable"},{id:"ac61429e-3838-4ff5-a09f-df3fafd99ac4",type_id:"809a375f-5c2a-462e-a7df-21dfd926111b",x:112,y:96,width:16,height:16,props:{},type:"Spike",texture:"#b30909",resize:"Disable"},{id:"86fef16b-e264-4c45-b73a-1ee0f133307d",type_id:"809a375f-5c2a-462e-a7df-21dfd926111b",x:112,y:112,width:16,height:16,props:{},type:"Spike",texture:"#b30909",resize:"Disable"},{id:"309c5b26-5acd-43ab-abaa-144e72884d52",type_id:"809a375f-5c2a-462e-a7df-21dfd926111b",x:112,y:48,width:16,height:16,props:{},type:"Spike",texture:"#b30909",resize:"Disable"},{id:"02d2141e-13db-44b5-bcef-93b767f05dfb",type_id:"809a375f-5c2a-462e-a7df-21dfd926111b",x:112,y:64,width:16,height:16,props:{},type:"Spike",texture:"#b30909",resize:"Disable"},{id:"40c89076-3348-497b-b52a-1185c57c5cc7",type_id:"f416f544-dc2c-4ed8-b652-1a212fdd074d",x:16,y:224,width:16,height:16,props:{},type:"Start",texture:"#848c1d",resize:"Disable"},{id:"82959a74-f809-42ae-aa00-09cd424833eb",type_id:"d28436e4-a196-4085-91bf-9daeaa07b11d",x:224,y:64,width:16,height:16,props:{},type:"End",texture:"#5e8e15",resize:"Disable"},{id:"630757e0-dcd2-4be9-af55-f27f353e3105",type_id:"d72c63a1-e251-4902-b32d-05b567d09437",x:304,y:160,width:16,height:16,props:{},type:"Block",texture:"#6B7280",resize:"Disable"}],y={config:b,grid:l,actors:f};class p{constructor(e){this.c=new a(e),this.level=y.actors,this.player=new c(this.c,this.level),this.draw()}draw(){this.c.updateDeltaTime(performance.now()),this.c.background("black"),this.renderLevel(),this.player.draw(),window.requestAnimationFrame(this.draw.bind(this))}renderLevel(){this.level.forEach(e=>{switch(e.type){case"Block":this.c.color("brown");break;case"Spike":this.c.color("red");break;case"Start":this.c.color("blue");break;case"End":this.c.color("yellow");break}this.c.rectangle(e.x,e.y,e.width,e.height)})}}new p("game");
